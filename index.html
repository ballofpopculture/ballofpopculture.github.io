<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
            <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <link href="/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
        <script>
            $.ajax({url: "classes.json", dataType: 'json', success: function(result){
                result['posts'].forEach(function(el){
                    $("#schedule").append('<tr><td data-rowid="' + el['id'] +'">' + el['courseName'] + '</td><td>' + el['coursePre'] + ' ' + el['courseNum'] + '</td><td> ' + el['semester'] +'</td><td>' + el['type'] + '</td><td>' + el['credits'] + '</td><td class="add" data-sem="' + el['sem'] + '" data-id="' + el['id'] + '"><span class="oi oi-plus" title="plus" aria-hidden="true"></span></td></tr></tr>');
                })
                //$("#schedule").html(result);
            }});
            
            $("#semester").change(function(){
                console.log($(this).val());
                table = document.getElementById("schedule");
                rows = table.getElementsByTagName("tr");
                console.log(rows);
                filter = $(this).val();
                
                for (let row of rows) { // `for...of` loops through the NodeList
                    console.log("HERE");
                    cells = row.getElementsByTagName("td");
                    console.log(cells[2]);
                    semester = cells[2] || null; // gets the 2nd `td` or nothing
                    // if the filter is set to 'All', or this is the header row, or 2nd `td` text matches filter
                    if (filter === "all" || !semester || (filter === semester.textContent)) {
                      row.style.display = ""; // shows this row
                    }
                    else {
                      row.style.display = "none"; // hides this row
                    }
                }
            })
            
            $(document).on('click', '.add', function(){
                console.log($(this).data('id'));
                course = $(this).closest('tr').find('td').eq(0).html()
                $('#' + $(this).data('sem')).append("<tr><td>" + course + "</td><td data-id=\"" + $(this).data('id') + "\" class=\"remove\"><span class=\"oi oi-x\" title=\"x\" aria-hidden=\"true\"></td></tr>")
                $(this).closest('tr').hide();
                
                //console.log($(this).closest('tr').find('td').eq(0).html());  
            })
            
            $(document).on('click', '.remove', function(){
                console.log($(this).data('id'));
                $('[data-rowid="'+ $(this).data('id') +'"]').show();
                $(this).closest('tr').remove()
            })
            
        </script>
    </head>
 <body>
    <h1>Hello, world!</h1>
    <div class="container">
        <div class="row">
            <div class="col-md">
                <table id="fa21">
                    <th>Fall 2021</th>
                </table>
            </div>
            <div class="col-md">
                <table id="sp22">
                    <th>Spring 2022</th>
                </table>
            </div>
            <div class="col-sm">
                <table id="stats">
                    <tr><td>Total Credits</td><td>0</td></tr>
                    <tr><td>EPSIK Credits</td><td>0</td></tr>
                    <tr><td>Addition EPSIK Credits</td><td>0</td>
                    <tr><td>Seminar Credits</td><td>0</td></tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-md">
                <table id="fa22">
                    <th>Fall 2022</th>
                </table>
            </div>
            <div class="col-md">
                <table id="sp23">
                    <th>Spring 2021</th>
                </table>
            </div>
        </div>
            
        <div class="row">
            <select id="semester">
                <option value="all">All Semesters</option>
                <option value="FALL 2021">Fall 2021</option>
                <option value="SPRING 2022">Spring 2022</option>
                <option value="FALL 2022">Fall 2022</option>
                <option value="SPRING 2023">Spring 2023</option>
            </select>
        </div>
        <div class="row">
            <table class="table" id="schedule">
            </table>
        </div>
    </div>
    
  </body>

</html>